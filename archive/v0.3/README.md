# Gluttonous v0.3 - 全市场选股策略

**发布日期**: 2026-01-14

## 版本概述

v0.3 实现了全市场选股策略（排除 CSI300 + CSI500 成分股），使用 LSTM 模型预测 5 日涨跌。

## 主要变更

### 相比 v0.2
- **股票池扩大**: 从 CSI500+CSI1000（~1,500只）扩展到全市场（~4,210只）
- **修复回测 Bug**: 原 daily return 计算改为正确的 5 日持有收益
- **新增绘图功能**: 收益率曲线、持仓比例、回撤图表

## 回测结果

| 指标 | v0.3 全市场 | v0.2 基准 |
|------|-------------|-----------|
| **收益率** | +74.84% | +38.74% |
| **年化收益** | +118.21% | - |
| **Sharpe Ratio** | 1.566 | 1.867 |
| **最大回撤** | 47.04% | 9.53% |
| **交易次数** | 1,682 | - |
| **胜率** | 47.03% | - |

## 策略配置

```python
TOP_N = 10              # 每日持仓数量
PROB_THRESHOLD = 0.60   # 概率阈值
HOLDING_DAYS = 5        # 持有天数
SAMPLE_RATIO = 0.5      # 训练采样比例
RANDOM_SEED = 42        # 随机种子
```

## 模型配置

- **模型**: LSTM (hidden=128, layers=2, dropout=0.3)
- **训练窗口**: 6 个月滚动
- **验证窗口**: 1 个月
- **特征数量**: 30 个技术指标

## 文件说明

| 文件 | 说明 |
|------|------|
| `backtest_v5.py` | 主回测脚本 |
| `plot_backtest.py` | 绘图脚本 |
| `backtest_v5_report.md` | 完整回测报告 |
| `images/` | 图表文件 |

## 已知问题

1. **最大回撤过高** (47%)：需要添加止损或市场择时机制
2. **2025-08~09 验证准确率下降**：模型在市场压力期表现不稳定

## 下一步计划 (v0.4)

- [ ] 添加止损机制
- [ ] 实现市场择时（验证准确率 < 55% 时减仓）
- [ ] 组合策略（v0.2 低回撤 + v0.3 高收益）
